	<!--
		Using the beliefbase with a belief. The agent stores its dictionary in
		a single-valued belief that can be accessed from a translation as well
		as from an add new word plan.
	-->
<agent xmlns="http://jadex.sourceforge.net/jadex" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://jadex.sourceforge.net/jadex
    http://jadex.sourceforge.net/jadex-0.96.xsd"
	name="Translator" package="pl.edu.agh.jadex">
	<imports>
		<import>java.util.logging.*</import>
		<import>java.util.*</import>
		<import>jadex.adapter.fipa.*</import>
		<import>jadex.util.Tuple</import>
	</imports>

	<beliefs>
		<belief name="egwords" class="Map">
			<fact>Translate.getDictionary()</fact>
		</belief>
	</beliefs>

	<!-- <beliefs>
		<beliefset name="egwords" class="Tuple">
			<fact>new Tuple("milk", "Milch")</fact>
			<fact>new Tuple("cat", "Katze")</fact>
		</beliefset>
	</beliefs> -->

	<plans>
		<plan name="add_word">
			<parameter name="new_word" class="String">
				<messageeventmapping ref="request_addword.content" />
			</parameter>
			<body>new AddWordToDictionary()</body>
			<trigger>
				<messageevent ref="request_addword" />
			</trigger>
		</plan>
		<plan name="translate">
			<parameter name="eword" class="String">
				<messageeventmapping ref="request_translation.content" />
			</parameter>
			<body>new Translate()</body>
			<trigger>
				<messageevent ref="request_translation" />
			</trigger>
			<precondition>
				Translate.containsWord((String)$event.getContent())
			</precondition>
		</plan>
		<plan name="translate_online" priority="-1">
			<parameter name="eword" class="String">
				<messageeventmapping ref="request_translation.content" />
			</parameter>
			<body>new TranslateOnline()</body>
			<trigger>
				<messageevent ref="request_translation" />
			</trigger>
		</plan>
	</plans>

	<events>
		<messageevent name="request_addword" direction="receive" type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.REQUEST</value>
			</parameter>
			<parameter name="content-start" class="String" direction="fixed">
				<value>"add"</value>
			</parameter>
		</messageevent>
		<messageevent name="request_translation" direction="receive"
			type="fipa">
			<parameter name="performative" class="String" direction="fixed">
				<value>SFipa.REQUEST</value>
			</parameter>
			<parameter name="content-start" class="String" direction="fixed">
				<value>"translate"</value>
			</parameter>
		</messageevent>
	</events>

	<!-- <expressions>
		<expression name="query_word">
			select one $wordpair.get(1)
			from Tuple $wordpair in $beliefbase.egwords
			where $wordpair.get(0).equals($word)
			<parameter name="$word" class="String"/>
		</expression>
	</expressions> -->

	<properties>
		<property name="logging.level">Level.INFO</property>
		<property name="logging.useParentHandlers">true</property>
	</properties>

	<configurations>
		<configuration name="default">
		</configuration>
	</configurations>
</agent>
